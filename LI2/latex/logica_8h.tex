\hypertarget{logica_8h}{}\doxysection{Referência ao ficheiro logica.\+h}
\label{logica_8h}\index{logica.h@{logica.h}}
{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include \char`\"{}dados.\+h\char`\"{}}\newline
\doxysubsection*{Funções}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{logica_8h_ac313d7e553b1e2b5f266acb9bfff8141}{jogar}} (\mbox{\hyperlink{struct_e_s_t_a_d_o}{E\+S\+T\+A\+DO}} $\ast$e, \mbox{\hyperlink{struct_c_o_o_r_d_e_n_a_d_a}{C\+O\+O\+R\+D\+E\+N\+A\+DA}} c)
\begin{DoxyCompactList}\small\item\em Função que usa os dados do estado e do input do jogador para fazer a jogada. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{logica_8h_a97c7ad5b7c6b698beca8006e674b85da}{jogada\+\_\+possivel}} (\mbox{\hyperlink{struct_e_s_t_a_d_o}{E\+S\+T\+A\+DO}} $\ast$e, \mbox{\hyperlink{struct_c_o_o_r_d_e_n_a_d_a}{C\+O\+O\+R\+D\+E\+N\+A\+DA}} c)
\begin{DoxyCompactList}\small\item\em Função que verifica se a jogada é possivel. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{logica_8h_aea1fcb269536a2b7ee0d12518887cd09}{jogo\+\_\+terminado}} (\mbox{\hyperlink{struct_e_s_t_a_d_o}{E\+S\+T\+A\+DO}} $\ast$e)
\begin{DoxyCompactList}\small\item\em Verifica se o jogo terminou. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{logica_8h_ab69d463df342757a679a40c4f6e5d6ae}{tabuleiro\+\_\+ficheiro}} (\mbox{\hyperlink{struct_e_s_t_a_d_o}{E\+S\+T\+A\+DO}} $\ast$e, char $\ast$linha)
\begin{DoxyCompactList}\small\item\em Coloca o tabuleiro e o estado do jogo num ficheiro. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{logica_8h_a9cf19fce71c78359807a3f579925edbb}{atualiza\+\_\+jogada}} (\mbox{\hyperlink{struct_e_s_t_a_d_o}{E\+S\+T\+A\+DO}} $\ast$e, int col, int lin)
\begin{DoxyCompactList}\small\item\em Função (auxiliar) que atualiza os dados de forma a que a jogada fique realizada. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{logica_8h_ac272f234a6e3ed2b2e3c05c727e33c75}{ler\+\_\+ficheiro}} (\mbox{\hyperlink{struct_e_s_t_a_d_o}{E\+S\+T\+A\+DO}} $\ast$e, char linha\mbox{[}$\,$\mbox{]})
\begin{DoxyCompactList}\small\item\em Lê um ficheiro e atualiza o estado do jogo com o estado do jogo definido nesse ficheiro. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{logica_8h_a608d40c8b37424e7bd4e5ee3f0fe8b97}{update\+\_\+array\+\_\+jogadas}} (\mbox{\hyperlink{struct_e_s_t_a_d_o}{E\+S\+T\+A\+DO}} $\ast$e, char lin\+\_\+fich\mbox{[}$\,$\mbox{]})
\begin{DoxyCompactList}\small\item\em Depois de ler ficheiro, atualiza as posições do array onde sao guardadas jogadas anteriores. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{logica_8h_a224bb3db996c2f3baca3a72b8509c3ce}{retira\+\_\+linha}} (char str\mbox{[}$\,$\mbox{]})
\begin{DoxyCompactList}\small\item\em Converte a string no formato de dados do ficheiro criado pelo utilizador para um inteiro correspondente à linha. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{logica_8h_a00a35418e9e9a6c215b653dceb822a03}{retira\+\_\+coluna}} (char str\mbox{[}$\,$\mbox{]})
\begin{DoxyCompactList}\small\item\em Converte a string no formato de dados do ficheiro criado pelo utilizador para um inteiro correspondente à coluna. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{logica_8h_aec4a963a88af44348027ec7cf17ff47a}{pos}} (\mbox{\hyperlink{struct_e_s_t_a_d_o}{E\+S\+T\+A\+DO}} $\ast$e, char $\ast$linha)
\begin{DoxyCompactList}\small\item\em Função para executar o comando \char`\"{}pos\char`\"{}. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Descrição detalhada}
Definição da camada logica. 

\doxysubsection{Documentação das funções}
\mbox{\Hypertarget{logica_8h_a9cf19fce71c78359807a3f579925edbb}\label{logica_8h_a9cf19fce71c78359807a3f579925edbb}} 
\index{logica.h@{logica.h}!atualiza\_jogada@{atualiza\_jogada}}
\index{atualiza\_jogada@{atualiza\_jogada}!logica.h@{logica.h}}
\doxysubsubsection{\texorpdfstring{atualiza\_jogada()}{atualiza\_jogada()}}
{\footnotesize\ttfamily void atualiza\+\_\+jogada (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_e_s_t_a_d_o}{E\+S\+T\+A\+DO}} $\ast$}]{e,  }\item[{int}]{col,  }\item[{int}]{lin }\end{DoxyParamCaption})}



Função (auxiliar) que atualiza os dados de forma a que a jogada fique realizada. 


\begin{DoxyParams}{Parâmetros}
{\em e} & Estado atual do jogo. \\
\hline
{\em col} & posição da coluna. \\
\hline
{\em lin} & posição da linha. \\
\hline
\end{DoxyParams}
\begin{quote}
Determina se foi o jogador 1 ou 2 a jogar, e, consoante isto, coloca na array \char`\"{}jogadas\char`\"{} as informações correspondentes. \end{quote}


\begin{quote}
Incrementa o numero de jogadas. \end{quote}


Definido na linha 29 do ficheiro logica.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{29                                                    \{}
\DoxyCodeLine{30     \textcolor{keywordtype}{int} jog = \mbox{\hyperlink{dados_8h_ad6e326e4ffa57ca1ae0c75377ecefc8c}{obter\_jogador\_atual}}(e);}
\DoxyCodeLine{31     \textcolor{keywordtype}{int} jogadas = \mbox{\hyperlink{dados_8h_a6cd0b387bdee9e18003c78852394aa63}{obter\_numero\_de\_jogadas}}(e);}
\DoxyCodeLine{33     \textcolor{keywordflow}{if} (jog == 1) \{}
\DoxyCodeLine{34         e-\/>jogadas[jogadas].jogador1.linha = lin;}
\DoxyCodeLine{35         e-\/>jogadas[jogadas].jogador1.coluna = col;}
\DoxyCodeLine{36     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{37         e-\/>jogadas[jogadas].jogador2.linha = lin;}
\DoxyCodeLine{38         e-\/>jogadas[jogadas].jogador2.coluna = col;}
\DoxyCodeLine{39     \}}
\DoxyCodeLine{40     \textcolor{keywordflow}{if} (jog == 1)}
\DoxyCodeLine{41         e-\/>jogador\_atual = 2;}
\DoxyCodeLine{42     \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{43         e-\/>jogador\_atual = 1;}
\DoxyCodeLine{45         e-\/>num\_jogadas++;}
\DoxyCodeLine{46     \}}
\DoxyCodeLine{47 \}}

\end{DoxyCode}
\mbox{\Hypertarget{logica_8h_a97c7ad5b7c6b698beca8006e674b85da}\label{logica_8h_a97c7ad5b7c6b698beca8006e674b85da}} 
\index{logica.h@{logica.h}!jogada\_possivel@{jogada\_possivel}}
\index{jogada\_possivel@{jogada\_possivel}!logica.h@{logica.h}}
\doxysubsubsection{\texorpdfstring{jogada\_possivel()}{jogada\_possivel()}}
{\footnotesize\ttfamily int jogada\+\_\+possivel (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_e_s_t_a_d_o}{E\+S\+T\+A\+DO}} $\ast$}]{e,  }\item[{\mbox{\hyperlink{struct_c_o_o_r_d_e_n_a_d_a}{C\+O\+O\+R\+D\+E\+N\+A\+DA}}}]{c }\end{DoxyParamCaption})}



Função que verifica se a jogada é possivel. 


\begin{DoxyParams}{Parâmetros}
{\em e} & Estado do jogo. \\
\hline
{\em c} & Coordenada introduzida pelo utilizador. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Retorna}
0 Caso nao seja possivel, 1 caso seja possivel. 
\end{DoxyReturn}


Definido na linha 50 do ficheiro logica.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{50                                               \{}
\DoxyCodeLine{51     \textcolor{keywordtype}{int} lin = abs(c.linha -\/ 8) -\/ 1;}
\DoxyCodeLine{52     \textcolor{keywordflow}{if} (\mbox{\hyperlink{dados_8h_a6faa68373203923729ed38657aa0f768}{obter\_estado\_casa}}(e,c) == BRANCA || \mbox{\hyperlink{dados_8h_a6faa68373203923729ed38657aa0f768}{obter\_estado\_casa}}(e,c) == PRETA ||}
\DoxyCodeLine{53     abs((e-\/>ultima\_jogada.linha) -\/ lin) > 1 || abs((e-\/>ultima\_jogada.coluna) -\/ (c.coluna)) > 1) \{}
\DoxyCodeLine{54 }
\DoxyCodeLine{55         \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{56     \}}
\DoxyCodeLine{57     \textcolor{keywordflow}{else} \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{58 \}}

\end{DoxyCode}
\mbox{\Hypertarget{logica_8h_ac313d7e553b1e2b5f266acb9bfff8141}\label{logica_8h_ac313d7e553b1e2b5f266acb9bfff8141}} 
\index{logica.h@{logica.h}!jogar@{jogar}}
\index{jogar@{jogar}!logica.h@{logica.h}}
\doxysubsubsection{\texorpdfstring{jogar()}{jogar()}}
{\footnotesize\ttfamily int jogar (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_e_s_t_a_d_o}{E\+S\+T\+A\+DO}} $\ast$}]{e,  }\item[{\mbox{\hyperlink{struct_c_o_o_r_d_e_n_a_d_a}{C\+O\+O\+R\+D\+E\+N\+A\+DA}}}]{c }\end{DoxyParamCaption})}



Função que usa os dados do estado e do input do jogador para fazer a jogada. 


\begin{DoxyParams}{Parâmetros}
{\em e} & Estado do jogo. \\
\hline
{\em c} & Coordenada introduzida pelo utilizador. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Retorna}
Um novo estado atualizado conforme a jogada. 
\end{DoxyReturn}
\begin{quote}
Coloca a peça na posição pedida pelo utilizador. \end{quote}


\begin{quote}
Coloca uma peça preta na casa anterior da peça branca. \end{quote}


\begin{quote}
Coloca a nova posição da peça branca como posição anterior para ser usada futuramente. \end{quote}


Definido na linha 10 do ficheiro logica.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{10                                    \{}
\DoxyCodeLine{11     \textcolor{keywordtype}{int} lin = abs(c.linha -\/ 8) -\/ 1;}
\DoxyCodeLine{12     \textcolor{keywordtype}{int} col = c.coluna;}
\DoxyCodeLine{13     \textcolor{keywordflow}{if} (\mbox{\hyperlink{logica_8h_a97c7ad5b7c6b698beca8006e674b85da}{jogada\_possivel}}(e,c) == 1) \{}
\DoxyCodeLine{15         e-\/>tab[lin][col] = BRANCA;}
\DoxyCodeLine{17         e-\/>tab[(e-\/>ultima\_jogada).linha][(e-\/>ultima\_jogada).coluna] = PRETA;}
\DoxyCodeLine{19         e-\/>ultima\_jogada.coluna = col;}
\DoxyCodeLine{20         e-\/>ultima\_jogada.linha = lin;}
\DoxyCodeLine{21         \mbox{\hyperlink{logica_8h_a9cf19fce71c78359807a3f579925edbb}{atualiza\_jogada}}(e, col, lin);}
\DoxyCodeLine{22         \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{23     \}}
\DoxyCodeLine{24     \textcolor{keywordflow}{else}}
\DoxyCodeLine{25     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{26 \}}

\end{DoxyCode}
\mbox{\Hypertarget{logica_8h_aea1fcb269536a2b7ee0d12518887cd09}\label{logica_8h_aea1fcb269536a2b7ee0d12518887cd09}} 
\index{logica.h@{logica.h}!jogo\_terminado@{jogo\_terminado}}
\index{jogo\_terminado@{jogo\_terminado}!logica.h@{logica.h}}
\doxysubsubsection{\texorpdfstring{jogo\_terminado()}{jogo\_terminado()}}
{\footnotesize\ttfamily int jogo\+\_\+terminado (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_e_s_t_a_d_o}{E\+S\+T\+A\+DO}} $\ast$}]{e }\end{DoxyParamCaption})}



Verifica se o jogo terminou. 


\begin{DoxyParams}{Parâmetros}
{\em e} & Estado do jogo. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Retorna}
1 caso o jogador 1 ganhe, 2 caso o jogador ganhe, 0 caso ainda ninguem tenha ganho, ou 3 caso as jogadas acabem. 
\end{DoxyReturn}


Definido na linha 61 do ficheiro logica.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{61                                \{}
\DoxyCodeLine{62     \textcolor{keywordtype}{int} r = 0;}
\DoxyCodeLine{63     \textcolor{keywordflow}{if} ((e-\/>ultima\_jogada.coluna == 0 \&\& e-\/>ultima\_jogada.linha == 7))}
\DoxyCodeLine{64         r = 1;}
\DoxyCodeLine{65     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ((e -\/>ultima\_jogada.linha == 0 \&\& e-\/>ultima\_jogada.coluna == 7))}
\DoxyCodeLine{66             r = 2;}
\DoxyCodeLine{67     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (e-\/>num\_jogadas == 32)}
\DoxyCodeLine{68                 r = 3;}
\DoxyCodeLine{69     \textcolor{keywordflow}{else}}
\DoxyCodeLine{70         r = 0;}
\DoxyCodeLine{71     \textcolor{keywordflow}{return} r;}
\DoxyCodeLine{72 \}}

\end{DoxyCode}
\mbox{\Hypertarget{logica_8h_ac272f234a6e3ed2b2e3c05c727e33c75}\label{logica_8h_ac272f234a6e3ed2b2e3c05c727e33c75}} 
\index{logica.h@{logica.h}!ler\_ficheiro@{ler\_ficheiro}}
\index{ler\_ficheiro@{ler\_ficheiro}!logica.h@{logica.h}}
\doxysubsubsection{\texorpdfstring{ler\_ficheiro()}{ler\_ficheiro()}}
{\footnotesize\ttfamily int ler\+\_\+ficheiro (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_e_s_t_a_d_o}{E\+S\+T\+A\+DO}} $\ast$}]{e,  }\item[{char}]{linha\mbox{[}$\,$\mbox{]} }\end{DoxyParamCaption})}



Lê um ficheiro e atualiza o estado do jogo com o estado do jogo definido nesse ficheiro. 


\begin{DoxyParams}{Parâmetros}
{\em e} & Estado atual do jogo. \\
\hline
{\em linha} & Linha obtida pela função \char`\"{}fgets()\char`\"{} no interpretador. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Retorna}
1 caso consiga ler o ficheiro, 0 caso nao consiga. 
\end{DoxyReturn}
\begin{quote}
Copia o nome do ficheiro presente na string \char`\"{}linha\char`\"{} e coloca na string \char`\"{}comando\char`\"{}, e concatena \char`\"{}.\+txt\char`\"{} no final. \end{quote}


\begin{quote}
Abre o ficheiro pedido pelo utilizador e lê o seu conteúdo. \end{quote}


\begin{quote}
Ao ler o ficheiro, quando chega ao local onde se encontram as jogadas anteriores, chama a função \char`\"{}update\+\_\+array\+\_\+jogadas()\char`\"{}. \end{quote}


Definido na linha 91 do ficheiro logica.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{91                                             \{}
\DoxyCodeLine{92 }
\DoxyCodeLine{93     FILE *fp;}
\DoxyCodeLine{94     \textcolor{keywordtype}{char} lin\_fich [BUF\_SIZE], *comando;}
\DoxyCodeLine{95     \textcolor{keywordtype}{int} k = 0;}
\DoxyCodeLine{96     \textcolor{keywordtype}{int} r = 0;}
\DoxyCodeLine{98     strtok(linha, \textcolor{stringliteral}{" "});}
\DoxyCodeLine{99     comando = strtok (NULL, \textcolor{stringliteral}{"\(\backslash\)n"});}
\DoxyCodeLine{100     strcat(comando, \textcolor{stringliteral}{".txt"});}
\DoxyCodeLine{102     \textcolor{comment}{//A função "access" retorna -\/1 caso nao encontre o ficheiro.}}
\DoxyCodeLine{103     \textcolor{keywordflow}{if} (access(comando, F\_OK) != -\/1) \{}
\DoxyCodeLine{104         e-\/>num\_jogadas = 0;}
\DoxyCodeLine{105         fp = fopen(comando, \textcolor{stringliteral}{"r"});}
\DoxyCodeLine{106         \textcolor{keywordflow}{while} (fgets(lin\_fich, BUF\_SIZE, fp) != NULL) \{}
\DoxyCodeLine{107             \mbox{\hyperlink{dados_8h_a99f70b4c2f315652b02f7a8c874cb2e4}{set\_casa}}(e, lin\_fich, k);}
\DoxyCodeLine{109             \textcolor{keywordflow}{if} (k >= 9) \{}
\DoxyCodeLine{110                 \mbox{\hyperlink{logica_8h_a608d40c8b37424e7bd4e5ee3f0fe8b97}{update\_array\_jogadas}}(e, lin\_fich);}
\DoxyCodeLine{111             \}}
\DoxyCodeLine{112             k++;}
\DoxyCodeLine{113         \}}
\DoxyCodeLine{114         fclose(fp);}
\DoxyCodeLine{115         r = 1;}
\DoxyCodeLine{116     \}}
\DoxyCodeLine{117     \textcolor{keywordflow}{else}}
\DoxyCodeLine{118         r = 0;}
\DoxyCodeLine{119     \textcolor{keywordflow}{return} r;}
\DoxyCodeLine{120 \}}

\end{DoxyCode}
\mbox{\Hypertarget{logica_8h_aec4a963a88af44348027ec7cf17ff47a}\label{logica_8h_aec4a963a88af44348027ec7cf17ff47a}} 
\index{logica.h@{logica.h}!pos@{pos}}
\index{pos@{pos}!logica.h@{logica.h}}
\doxysubsubsection{\texorpdfstring{pos()}{pos()}}
{\footnotesize\ttfamily int pos (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_e_s_t_a_d_o}{E\+S\+T\+A\+DO}} $\ast$}]{e,  }\item[{char $\ast$}]{linha }\end{DoxyParamCaption})}



Função para executar o comando \char`\"{}pos\char`\"{}. 


\begin{DoxyParams}{Parâmetros}
{\em e} & Estado atual do jogo. \\
\hline
{\em linha} & Linha obtida pelo interpretador na camada \char`\"{}\+Interface\char`\"{}. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Retorna}
1 caso a operação seja executada com sucesso, 0 caso não seja executada com sucesso. 
\end{DoxyReturn}
\begin{quote}
Extrai o algarismo que é introduzido após o comando \char`\"{}pos\char`\"{} (\char`\"{}pos 5\char`\"{}, extrai o \char`\"{}5\char`\"{}). \end{quote}


\begin{quote}
Verifica que o comando \char`\"{}pos\char`\"{} apenas está a ser introduzido a uma jogada anterior e não à jogada anterior. \end{quote}


Definido na linha 168 do ficheiro logica.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{168                                  \{}
\DoxyCodeLine{169     \textcolor{keywordtype}{char} *comando, *end;}
\DoxyCodeLine{170     \textcolor{keywordtype}{int} r, max = \mbox{\hyperlink{dados_8h_a6cd0b387bdee9e18003c78852394aa63}{obter\_numero\_de\_jogadas}}(e);}
\DoxyCodeLine{171     strtok (linha, \textcolor{stringliteral}{" "});}
\DoxyCodeLine{172     comando = strtok(NULL, \textcolor{stringliteral}{"\(\backslash\)n"});}
\DoxyCodeLine{174     r = strtol (comando, \&end, 10);}
\DoxyCodeLine{176     \textcolor{keywordflow}{if} (r < max + 1) \{}
\DoxyCodeLine{177         \mbox{\hyperlink{dados_8h_a72bd3fb56f0ac3af60c392b49f76a329}{pos\_helper}}(e, r);}
\DoxyCodeLine{178         \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{179     \}}
\DoxyCodeLine{180     \textcolor{keywordflow}{else}}
\DoxyCodeLine{181         \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{182 \}}

\end{DoxyCode}
\mbox{\Hypertarget{logica_8h_a00a35418e9e9a6c215b653dceb822a03}\label{logica_8h_a00a35418e9e9a6c215b653dceb822a03}} 
\index{logica.h@{logica.h}!retira\_coluna@{retira\_coluna}}
\index{retira\_coluna@{retira\_coluna}!logica.h@{logica.h}}
\doxysubsubsection{\texorpdfstring{retira\_coluna()}{retira\_coluna()}}
{\footnotesize\ttfamily int retira\+\_\+coluna (\begin{DoxyParamCaption}\item[{char}]{str\mbox{[}$\,$\mbox{]} }\end{DoxyParamCaption})}



Converte a string no formato de dados do ficheiro criado pelo utilizador para um inteiro correspondente à coluna. 


\begin{DoxyParams}{Parâmetros}
{\em str} & String de onde vao ser tirados os dados. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Retorna}
Uma posição para a coluna do tabuleiro. 
\end{DoxyReturn}


Definido na linha 156 do ficheiro logica.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{156                                \{}
\DoxyCodeLine{157     \textcolor{keywordtype}{int} cord;}
\DoxyCodeLine{158     \textcolor{comment}{//Quando a função isalpha() retornar algum valor diferente de 0, converte-\/o num int e devolve-\/o.f}}
\DoxyCodeLine{159     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; str[i] != \textcolor{charliteral}{'\(\backslash\)0'}; i++) \{}
\DoxyCodeLine{160         \textcolor{keywordflow}{if} (isalpha(str[i]) != 0) \{}
\DoxyCodeLine{161             cord = str[i] -\/ \textcolor{charliteral}{'a'};}
\DoxyCodeLine{162             \textcolor{keywordflow}{return} cord;}
\DoxyCodeLine{163         \}}
\DoxyCodeLine{164     \}}
\DoxyCodeLine{165     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{166 \}}

\end{DoxyCode}
\mbox{\Hypertarget{logica_8h_a224bb3db996c2f3baca3a72b8509c3ce}\label{logica_8h_a224bb3db996c2f3baca3a72b8509c3ce}} 
\index{logica.h@{logica.h}!retira\_linha@{retira\_linha}}
\index{retira\_linha@{retira\_linha}!logica.h@{logica.h}}
\doxysubsubsection{\texorpdfstring{retira\_linha()}{retira\_linha()}}
{\footnotesize\ttfamily int retira\+\_\+linha (\begin{DoxyParamCaption}\item[{char}]{str\mbox{[}$\,$\mbox{]} }\end{DoxyParamCaption})}



Converte a string no formato de dados do ficheiro criado pelo utilizador para um inteiro correspondente à linha. 


\begin{DoxyParams}{Parâmetros}
{\em str} & String de onde vao ser tirados os dados. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Retorna}
Uma posição para a linha do tabuleiro. 
\end{DoxyReturn}


Definido na linha 142 do ficheiro logica.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{142                               \{}
\DoxyCodeLine{143     \textcolor{keywordtype}{int} r = 0;}
\DoxyCodeLine{144     \textcolor{keywordtype}{char} *end;}
\DoxyCodeLine{145     \textcolor{comment}{//Quando enconrtar algum elemento da string para a qual a funcao isdigit() devolva algum valor diferente de 0, converte-\/o num int e devolve-\/o.}}
\DoxyCodeLine{146     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; str[i] != \textcolor{charliteral}{'\(\backslash\)0'}; i++) \{}
\DoxyCodeLine{147         \textcolor{keywordflow}{if} (isdigit(str[i]) != 0) \{}
\DoxyCodeLine{148            r = strtol(\&str[i], \&end, 10);}
\DoxyCodeLine{149            r = abs(r-\/8);}
\DoxyCodeLine{150            \textcolor{keywordflow}{return} r;}
\DoxyCodeLine{151         \}}
\DoxyCodeLine{152     \}}
\DoxyCodeLine{153     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{154 \}}

\end{DoxyCode}
\mbox{\Hypertarget{logica_8h_ab69d463df342757a679a40c4f6e5d6ae}\label{logica_8h_ab69d463df342757a679a40c4f6e5d6ae}} 
\index{logica.h@{logica.h}!tabuleiro\_ficheiro@{tabuleiro\_ficheiro}}
\index{tabuleiro\_ficheiro@{tabuleiro\_ficheiro}!logica.h@{logica.h}}
\doxysubsubsection{\texorpdfstring{tabuleiro\_ficheiro()}{tabuleiro\_ficheiro()}}
{\footnotesize\ttfamily void tabuleiro\+\_\+ficheiro (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_e_s_t_a_d_o}{E\+S\+T\+A\+DO}} $\ast$}]{e,  }\item[{char $\ast$}]{linha }\end{DoxyParamCaption})}



Coloca o tabuleiro e o estado do jogo num ficheiro. 


\begin{DoxyParams}{Parâmetros}
{\em e} & Estado do jogo. \\
\hline
{\em linha} & Nome do ficheiro onde vai ser guardado o estado. \\
\hline
\end{DoxyParams}
\begin{quote}
Copia o nome do ficheiro presente na string \char`\"{}linha\char`\"{} e coloca na string \char`\"{}comando\char`\"{}, e concatena \char`\"{}.\+txt\char`\"{} no final. \end{quote}


\begin{quote}
Cria o ficheiro com o nome pedido pelo utilizador, ou abre-\/o, caso este ja exista. \end{quote}


Definido na linha 75 do ficheiro logica.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{75                                                 \{}
\DoxyCodeLine{76     \textcolor{keywordtype}{char} *comando;}
\DoxyCodeLine{78     strtok(linha, \textcolor{stringliteral}{" "});}
\DoxyCodeLine{79     comando = strtok(NULL, \textcolor{stringliteral}{"\(\backslash\)n"});}
\DoxyCodeLine{80     strcat(comando, \textcolor{stringliteral}{".txt"});}
\DoxyCodeLine{81 }
\DoxyCodeLine{83     FILE *fp;}
\DoxyCodeLine{84     fp = fopen(comando, \textcolor{stringliteral}{"w"});}
\DoxyCodeLine{85     \mbox{\hyperlink{interface_8h_aa36b92ddb3d9b1fdb93d8524262ee66c}{imprime\_fileTab}}(e, fp);}
\DoxyCodeLine{86     \mbox{\hyperlink{interface_8h_acb7c3a1d861395fabd4db18a365738b9}{file\_posAnt}}(e, fp);}
\DoxyCodeLine{87     fclose(fp);}
\DoxyCodeLine{88 \}}

\end{DoxyCode}
\mbox{\Hypertarget{logica_8h_a608d40c8b37424e7bd4e5ee3f0fe8b97}\label{logica_8h_a608d40c8b37424e7bd4e5ee3f0fe8b97}} 
\index{logica.h@{logica.h}!update\_array\_jogadas@{update\_array\_jogadas}}
\index{update\_array\_jogadas@{update\_array\_jogadas}!logica.h@{logica.h}}
\doxysubsubsection{\texorpdfstring{update\_array\_jogadas()}{update\_array\_jogadas()}}
{\footnotesize\ttfamily void update\+\_\+array\+\_\+jogadas (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_e_s_t_a_d_o}{E\+S\+T\+A\+DO}} $\ast$}]{e,  }\item[{char}]{lin\+\_\+fich\mbox{[}$\,$\mbox{]} }\end{DoxyParamCaption})}



Depois de ler ficheiro, atualiza as posições do array onde sao guardadas jogadas anteriores. 


\begin{DoxyParams}{Parâmetros}
{\em e} & Estado atual do jogo. \\
\hline
{\em lin\+\_\+fich} & Linha obtida pela função \char`\"{}ler ficheiro\char`\"{}. \\
\hline
\end{DoxyParams}
\begin{quote}
Determina qual das partes da função usar (parte 1 caso i seja menor que 2, e parte 2 caso i seja maior que dois.) \end{quote}


Definido na linha 122 do ficheiro logica.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{122                                                        \{}
\DoxyCodeLine{123     \textcolor{keywordtype}{int} i, index;}
\DoxyCodeLine{124     \textcolor{keywordtype}{char} *nome;}
\DoxyCodeLine{125     \textcolor{comment}{// A partir do ficheiro, obtem o numero da jogada e guarda-\/a na variável index.}}
\DoxyCodeLine{126     index = atoi(lin\_fich) -\/ 1;}
\DoxyCodeLine{127 }
\DoxyCodeLine{128     \textcolor{comment}{/* Retira os primeiros 4 elementos da string (uma string que fosse: "01: e5 d5" passa a ser "e5 d5".}}
\DoxyCodeLine{129 \textcolor{comment}{     */}}
\DoxyCodeLine{130     strtok(lin\_fich, \textcolor{stringliteral}{" "});}
\DoxyCodeLine{131     nome = strtok(NULL, \textcolor{stringliteral}{"\(\backslash\)n"});}
\DoxyCodeLine{133     \textcolor{keywordflow}{for} (i = 0; nome[i] != \textcolor{charliteral}{'\(\backslash\)0'} ; i++);}
\DoxyCodeLine{134     \textcolor{keywordflow}{if} (i > 2)}
\DoxyCodeLine{135         \mbox{\hyperlink{dados_8h_afc541510798bc33e8220baa9bf271f46}{set\_jogadas}}(e, nome, 2, index);}
\DoxyCodeLine{136 }
\DoxyCodeLine{137     \textcolor{keywordflow}{else}}
\DoxyCodeLine{138         \mbox{\hyperlink{dados_8h_afc541510798bc33e8220baa9bf271f46}{set\_jogadas}}(e, nome, 1, index);}
\DoxyCodeLine{139 \}}

\end{DoxyCode}
